<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo de Entregas</title>
    <style>
        /* CSS B√ÅSICO PARA ESTILIZAR O JOGO */
        #game-container {
            width: 600px;
            height: 400px;
            border: 5px solid #333;
            background-color: #e0f7fa; /* Cor de fundo (rua/ch√£o) */
            position: relative; /* Necess√°rio para posicionar elementos internos */
            overflow: hidden;
            cursor: pointer; /* Indica que a tela √© clic√°vel */
        }
        
        #player {
            width: 30px;
            height: 30px;
            background-color: #ff5722; /* Laranja (Personagem) */
            border-radius: 50%;
            position: absolute;
            transition: all 0.5s ease-out; /* Suaviza a anima√ß√£o do movimento */
            text-align: center;
            line-height: 30px;
            font-size: 16px;
            color: white;
            z-index: 10;
            font-weight: bold;
        }

        .customer {
            width: 40px;
            height: 40px;
            background-color: #4caf50; /* Verde (Cliente) */
            border-radius: 5px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }

        .customer.has-food {
            background-color: #2196f3; /* Azul quando espera comida */
        }

        #score-board {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            background: #fff;
            border: 2px solid #333;
            font-family: Arial, sans-serif;
            font-weight: bold;
            z-index: 20;
        }
    </style>
</head>
<body>
    
    <div id="game-container">
        <div id="score-board">Dinheiro: $0</div>
        </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const scoreBoard = document.getElementById('score-board');
        let money = 0;
        
        // --- CONFIGURA√á√ïES DO JOGO ---
        const PLAYER_SPEED = 500; // Tempo em ms para mover (quanto menor, mais r√°pido)
        const DELIVERY_MONEY = 10;
        const CUSTOMERS_COUNT = 3;
        
        // --- CRIAR PLAYER ---
        const player = document.createElement('div');
        player.id = 'player';
        player.style.left = '50px';
        player.style.top = '200px';
        player.textContent = 'üçï'; // √çcone de comida
        gameContainer.appendChild(player);

        let playerMoving = false; // Flag para evitar cliques durante o movimento

        // --- CRIAR CLIENTES ---
        let customers = [];
        
        function getRandomPosition() {
            // Garante que a posi√ß√£o esteja dentro dos limites do container
            const x = Math.random() * (560 - 40) + 20; // 560 = 600 (width) - 40 (customer size)
            const y = Math.random() * (360 - 40) + 20; // 360 = 400 (height) - 40 (customer size)
            return { x, y };
        }

        function createCustomers() {
            for (let i = 0; i < CUSTOMERS_COUNT; i++) {
                const pos = getRandomPosition();
                const customer = document.createElement('div');
                customer.className = 'customer has-food';
                customer.id = 'customer-' + i;
                customer.style.left = `${pos.x}px`;
                customer.style.top = `${pos.y}px`;
                customer.textContent = '$?';
                customer.isWaiting = true; // Cliente precisa de comida
                customer.dataset.id = i;

                gameContainer.appendChild(customer);
                customers.push(customer);
            }
        }

        // --- L√ìGICA DE MOVIMENTO E ENTREGA ---
        
        gameContainer.addEventListener('click', function(event) {
            if (playerMoving) return; // N√£o permite clicar enquanto o player se move

            // Encontra a posi√ß√£o do clique dentro do container
            const targetX = event.offsetX - player.offsetWidth / 2;
            const targetY = event.offsetY - player.offsetHeight / 2;
            
            // Inicia o movimento
            movePlayer(targetX, targetY);

            // Verifica se o clique foi em um cliente
            const clickedElement = event.target;
            if (clickedElement.classList.contains('customer') && clickedElement.isWaiting) {
                // Se clicou no cliente esperando, move para ele
                const customerX = parseFloat(clickedElement.style.left) + clickedElement.offsetWidth / 2;
                const customerY = parseFloat(clickedElement.style.top) + clickedElement.offsetHeight / 2;
                
                // Move o player para o centro do cliente (ajustado para o centro do player)
                movePlayer(customerX - player.offsetWidth / 2, customerY - player.offsetHeight / 2, clickedElement);
            }
        });

        function movePlayer(x, y, targetCustomer = null) {
            playerMoving = true;
            
            // Aplica a nova posi√ß√£o via CSS Transition
            player.style.left = `${x}px`;
            player.style.top = `${y}px`;

            // Espera a anima√ß√£o terminar (tempo definido no CSS: 0.5s)
            setTimeout(() => {
                playerMoving = false;
                
                // Se t√≠nhamos um cliente alvo, tentamos a entrega
                if (targetCustomer && targetCustomer.isWaiting) {
                    deliverFood(targetCustomer);
                }
            }, PLAYER_SPEED); // Usa o tempo de velocidade definido
        }

        function deliverFood(customer) {
            // Verifica a proximidade (simples: se o player est√° na mesma posi√ß√£o do target)
            // No nosso caso, como movemos o player diretamente para l√°, a proximidade √© garantida.

            money += DELIVERY_MONEY;
            scoreBoard.textContent = `Dinheiro: $${money}`;
            
            // Muda o estado do cliente
            customer.isWaiting = false;
            customer.classList.remove('has-food');
            customer.style.backgroundColor = '#607d8b'; // Cor cinza para cliente satisfeito
            customer.textContent = 'Obrigado!';
            
            // Reaparece o cliente em um novo lugar ap√≥s um tempo
            setTimeout(() => {
                resetCustomer(customer);
            }, 3000); // 3 segundos antes de precisar de nova entrega
        }

        function resetCustomer(customer) {
            const pos = getRandomPosition();
            customer.isWaiting = true;
            customer.classList.add('has-food');
            customer.style.left = `${pos.x}px`;
            customer.style.top = `${pos.y}px`;
            customer.style.backgroundColor = '#2196f3'; // Volta para azul (esperando)
            customer.textContent = '$?';
        }

        // Inicia o jogo
        createCustomers();

    </script>
</body>
</html>
