<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo de Entregas - Visual</title>
    <style>
        /* ESTILOS GERAIS */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f4f8; /* Fundo leve */
            font-family: 'Arial', sans-serif;
        }

        /* CONTAINER DO JOGO (O MAPA) */
        #game-container {
            width: 700px;
            height: 500px;
            border: 10px solid #5a5a5a;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"><circle cx="15" cy="15" r="10" fill="green" opacity="0.6"/></svg>') 15 15, pointer; /* Cursor de alvo */
            
            /* USANDO CSS GRID PARA CRIAR O LAYOUT DA CIDADE */
            display: grid;
            grid-template-columns: 1fr 100px 1fr 100px 1fr; /* Largura das Colunas: Edif√≠cios | Ruas | Edif√≠cios | Ruas | Edif√≠cios */
            grid-template-rows: 1fr 100px 1fr 100px 1fr; /* Altura das Linhas */
        }

        /* ESTILO PARA AS C√âLULAS DO GRID (MAPA) */
        .grid-cell {
            position: relative;
            box-sizing: border-box;
        }

        /* RUAS (ROW E COLUNA DE RUAS) */
        .grid-cell:nth-child(5n+2), 
        .grid-cell:nth-child(5n+4), 
        .grid-cell:nth-child(n) { /* Seleciona c√©lulas da linha de rua e coluna de rua */
            background-color: #555; /* Asfalto escuro */
            border: 1px dashed #fff; /* Linhas da estrada */
            opacity: 0.9;
        }
        
        /* EDIF√çCIOS/√ÅREAS DE CIDADE (O RESTO) */
        .grid-cell:not([class*='street']) {
            background-color: #a8dadc; /* Cores claras para edif√≠cios */
            border: 1px solid #457b9d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: #1d3557;
            text-align: center;
        }
        .grid-cell:nth-child(5n+1), .grid-cell:nth-child(5n+3), .grid-cell:nth-child(5n+5) { /* Colunas de edif√≠cios */
            background-color: #d8e3e7;
        }
        
        /* PLACAR */
        #score-board {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.7);
            color: #ffcc00; /* Dourado */
            border-radius: 5px;
            font-weight: bold;
            z-index: 20;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        /* PERSONAGEM */
        #player {
            width: 40px;
            height: 40px;
            position: absolute;
            transition: all 0.5s ease-out;
            text-align: center;
            line-height: 40px;
            font-size: 30px; /* Tamanho do emoji da moto/personagem */
            z-index: 100;
        }
        
        /* CLIENTES */
        .customer {
            width: 40px;
            height: 40px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 25px;
            z-index: 50;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s; /* Anima√ß√£o para feedback visual */
        }
        
        .customer.has-food {
            background-color: #e63946; /* Vermelho: Esperando comida */
            animation: pulse 1s infinite alternate; /* Anima√ß√£o de pulsar para clientes esperando */
        }

        .customer.satisfied {
            background-color: #457b9d; /* Azul: Cliente satisfeito */
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
    </style>
</head>
<body>
    
    <div id="game-container">
        <div id="score-board">Dinheiro: $0</div>
        <script>
            const container = document.getElementById('game-container');
            for(let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                if ((i % 5 === 1) || (i % 5 === 3) || (i >= 5 && i <= 9 && (i-5) % 5 === 2) ) {
                    cell.classList.add('street-col');
                }
                if (Math.floor(i / 5) === 1 || Math.floor(i / 5) === 3) {
                     cell.classList.add('street-row');
                }
                if (cell.classList.length === 1) {
                    cell.textContent = 'Edif√≠cio ' + (i + 1);
                }
                container.appendChild(cell);
            }
        </script>
        
        </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const scoreBoard = document.getElementById('score-board');
        let money = 0;
        
        // --- CONFIGURA√á√ïES DO JOGO ---
        const PLAYER_SPEED = 500; 
        const DELIVERY_MONEY = 25;
        const CUSTOMERS_COUNT = 3;
        const CUSTOMER_RESET_TIME = 4000;
        
        // --- CRIAR PLAYER ---
        const player = document.createElement('div');
        player.id = 'player';
        player.style.left = '300px'; 
        player.style.top = '250px';
        player.textContent = 'üõµ'; // Emoji de Moto
        gameContainer.appendChild(player);

        let playerMoving = false; 

        // --- CRIAR CLIENTES ---
        let customers = [];
        const CUSTOMER_LOCATIONS = [
            { x: 50, y: 50 }, { x: 600, y: 50 }, { x: 50, y: 400 }, 
            { x: 600, y: 400 }, { x: 350, y: 50 } 
        ];
        
        function getRandomPosition() {
            // Usa as posi√ß√µes pr√©-definidas para garantir que os clientes n√£o fiquem na "rua"
            const index = Math.floor(Math.random() * CUSTOMER_LOCATIONS.length);
            const pos = CUSTOMER_LOCATIONS.splice(index, 1)[0] || { x: 300, y: 300 }; // Remove e retorna o escolhido
            return { x: pos.x - 20, y: pos.y - 20 }; // Ajusta para o centro
        }

        function createCustomers() {
            for (let i = 0; i < CUSTOMERS_COUNT; i++) {
                const pos = getRandomPosition();
                const customer = document.createElement('div');
                customer.className = 'customer has-food';
                customer.style.left = `${pos.x}px`;
                customer.style.top = `${pos.y}px`;
                customer.textContent = 'üè†'; // Emoji de Casa/Cliente
                customer.isWaiting = true;
                customer.dataset.id = i;

                gameContainer.appendChild(customer);
                customers.push(customer);
            }
        }

        // --- L√ìGICA DE MOVIMENTO E ENTREGA ---
        
        gameContainer.addEventListener('click', function(event) {
            if (playerMoving) return; 

            const clickedElement = event.target;
            let targetX, targetY, targetCustomer = null;

            if (clickedElement.classList.contains('customer') && clickedElement.isWaiting) {
                // Clicou no Cliente
                targetX = parseFloat(clickedElement.style.left);
                targetY = parseFloat(clickedElement.style.top);
                targetCustomer = clickedElement;
            } else {
                // Clicou no Mapa (apenas move)
                targetX = event.offsetX - player.offsetWidth / 2;
                targetY = event.offsetY - player.offsetHeight / 2;
            }
            
            // Inicia o movimento (mesmo que seja s√≥ mover, sem entrega)
            movePlayer(targetX, targetY, targetCustomer);
        });

        function movePlayer(x, y, targetCustomer = null) {
            playerMoving = true;
            
            // Aplica a nova posi√ß√£o (o player se move)
            player.style.left = `${x}px`;
            player.style.top = `${y}px`;

            // Espera a anima√ß√£o terminar
            setTimeout(() => {
                playerMoving = false;
                
                // Tenta a entrega se o player chegou ao cliente esperando
                if (targetCustomer && targetCustomer.isWaiting) {
                    deliverFood(targetCustomer);
                }
            }, PLAYER_SPEED); 
        }

        function deliverFood(customer) {
            // Adiciona o dinheiro
            money += DELIVERY_MONEY;
            scoreBoard.textContent = `Dinheiro: $${money}`;
            
            // Feedback visual de entrega
            customer.isWaiting = false;
            customer.classList.remove('has-food');
            customer.classList.add('satisfied');
            customer.textContent = 'ü•≥'; 
            
            // Toca um pequeno som (opcional, requer √°udio)
            // new Audio('ding.mp3').play(); 
            
            // Reaparece o cliente em um novo lugar ap√≥s um tempo
            setTimeout(() => {
                resetCustomer(customer);
            }, CUSTOMER_RESET_TIME); 
        }

        function resetCustomer(customer) {
            // Recoloca a localiza√ß√£o no pool de posi√ß√µes e pega uma nova
            CUSTOMER_LOCATIONS.push({ 
                x: parseFloat(customer.style.left) + customer.offsetWidth / 2, 
                y: parseFloat(customer.style.top) + customer.offsetHeight / 2 
            });
            const pos = getRandomPosition();
            
            // Reseta o estado
            customer.isWaiting = true;
            customer.classList.remove('satisfied');
            customer.classList.add('has-food');
            customer.style.left = `${pos.x}px`;
            customer.style.top = `${pos.y}px`;
            customer.textContent = 'üè†'; 
        }

        // Inicia o jogo
        createCustomers();

    </script>
</body>
</html>